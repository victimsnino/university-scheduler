from university import *
from solver import Solver
from beautiful_out import open_as_html
import pytest

def test_main():
    university = University(weeks=2)
#
    university.add_room(1, 225, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 325, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 102, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 104, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 105, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 202, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 201, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 204, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 301, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 302, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 303, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 304, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 145, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 306, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 307, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 308, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 207, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 219, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(1, 318, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 102, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 104, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 204, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 301, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 302, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 207, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 402, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(2, 403, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 325, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 104, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 301, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 302, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 207, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 145, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 403, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)
    university.add_room(3, 318, RoomType.LECTURE | RoomType.PRACTICE | RoomType.COMPUTER, 100)

    university.add_group('19ПМИ-1', 1, GroupType.BACHELOR)
    university.add_group('19ПМИ-2', 1, GroupType.BACHELOR)
    university.add_group('19ПМИ-3', 1, GroupType.BACHELOR)
    university.add_group('18ПМИ1', 1, GroupType.BACHELOR)
    university.add_group('18ПМИ2', 1, GroupType.BACHELOR)
    university.add_group('17ПМИ', 1, GroupType.BACHELOR)
    university.add_group('16ПМИ', 1, GroupType.BACHELOR)

    university.add_teacher('Кащеев')
    university.add_teacher('Кетков')
    university.add_teacher('Беспалов')
    university.add_teacher('Савина')
    university.add_teacher('Лупанова')
    university.add_teacher('Чистяков')
    university.add_teacher('Малышев')
    university.add_teacher('Зимина')
    university.add_teacher('Грибанов')
    university.add_teacher('Чистякова')
    university.add_teacher('Гордеева')
    university.add_teacher('Сафонов')
    university.add_teacher('Колданов')
    university.add_teacher('Штанюк')
    university.add_teacher('Сироткин')
    university.add_teacher('Бацына')
    university.add_teacher('Кочеганов')
    university.add_teacher('Ефименков')
    university.add_teacher('Абрашкин')
    university.add_teacher('Бабкина')
    university.add_teacher('Фролова')
    university.add_teacher('Слащинин')
    university.add_teacher('Зеленов')
    
    university.add_lesson('Архитектура компьютера и операционные системы', ['19ПМИ-1'], 1*university.study_weeks, RoomType.PRACTICE, ['Кащеев'])
    university.add_lesson('Архитектура компьютера и операционные системы', ['19ПМИ-1'], 1*university.study_weeks, RoomType.LECTURE, ['Кащеев'])
    university.add_lesson('Научный семинар', ['19ПМИ-1'], 1*university.study_weeks, RoomType.PRACTICE, ['Кетков'])
    university.add_lesson('Линейная алгебра и геометрия', ['19ПМИ-1'], 1*university.study_weeks, RoomType.PRACTICE, ['Беспалов'])
    university.add_lesson('Линейная алгебра и геометрия', ['19ПМИ-1'], 1*university.study_weeks, RoomType.LECTURE, ['Савина'])
    university.add_lesson('Основы и медология программирования', ['19ПМИ-1'], 2*university.study_weeks, RoomType.PRACTICE, ['Лупанова'])
    university.add_lesson('Математический анализ 1', ['19ПМИ-1'], 2*university.study_weeks, RoomType.PRACTICE, ['Чистяков'])
    university.add_lesson('Математический анализ 1', ['19ПМИ-1'], 1*university.study_weeks, RoomType.LECTURE, ['Чистяков'])
    university.add_lesson('Дискретная математика', ['19ПМИ-1'], 1*university.study_weeks, RoomType.LECTURE, ['Малышев'])
    university.add_lesson('Дискретная математика', ['19ПМИ-1'], 0.5*university.study_weeks, RoomType.PRACTICE, ['Малышев'])

    university.add_lesson('Архитектура компьютера и операционные системы', ['19ПМИ-2'], 1*university.study_weeks, RoomType.LECTURE, ['Кащеев'])
    university.add_lesson('Архитектура компьютера и операционные системы', ['19ПМИ-2'], 2*university.study_weeks, RoomType.PRACTICE, ['Кащеев'])
    university.add_lesson('Основы и медология программирования', ['19ПМИ-2'], 3*university.study_weeks, RoomType.PRACTICE, ['Лупанова'])
    university.add_lesson('Линейная алгебра и геометрия', ['19ПМИ-2'], 1*university.study_weeks, RoomType.PRACTICE, ['Савина'])
    university.add_lesson('Линейная алгебра и геометрия', ['19ПМИ-2'], 1*university.study_weeks, RoomType.LECTURE, ['Зимина'])
    university.add_lesson('Математический анализ 1', ['19ПМИ-2'], 1*university.study_weeks, RoomType.LECTURE, ['Чистяков'])
    university.add_lesson('Математический анализ 1', ['19ПМИ-2'], 2*university.study_weeks, RoomType.PRACTICE, ['Чистяков'])
    university.add_lesson('Дискретная математика', ['19ПМИ-2'], 1*university.study_weeks, RoomType.PRACTICE, ['Грибанов'])
    university.add_lesson('Научный семинар', ['19ПМИ-2'], 1*university.study_weeks, RoomType.PRACTICE, ['Кетков'])
    university.add_lesson('Дискретная математика', ['19ПМИ-2'], 1*university.study_weeks, RoomType.LECTURE, ['Малышев'])

    university.add_lesson('Архитектура компьютера и операционные системы', ['19ПМИ-3'], 1*university.study_weeks, RoomType.LECTURE, ['Кащеев'])
    university.add_lesson('Архитектура компьютера и операционные системы', ['19ПМИ-3'], 2*university.study_weeks, RoomType.PRACTICE, ['Кащеев'])
    university.add_lesson('Основы и медология программирования', ['19ПМИ-3'], 3*university.study_weeks, RoomType.PRACTICE, ['Лупанова'])
    university.add_lesson('Линейная алгебра и геометрия', ['19ПМИ-3'], 1*university.study_weeks, RoomType.PRACTICE, ['Савина'])
    university.add_lesson('Линейная алгебра и геометрия', ['19ПМИ-3'], 1*university.study_weeks, RoomType.LECTURE, ['Зимина'])
    university.add_lesson('Математический анализ 1', ['19ПМИ-3'], 2*university.study_weeks, RoomType.PRACTICE, ['Чистякова'])
    university.add_lesson('Математический анализ 1', ['19ПМИ-3'], 1*university.study_weeks, RoomType.LECTURE, ['Чистяков'])
    university.add_lesson('Дискретная математика', ['19ПМИ-3'], 1*university.study_weeks, RoomType.PRACTICE, ['Грибанов'])
    university.add_lesson('Научный семинар', ['19ПМИ-3'], 1*university.study_weeks, RoomType.PRACTICE, ['Кетков'])
    university.add_lesson('Дискретная математика', ['19ПМИ-3'], 1*university.study_weeks, RoomType.LECTURE, ['Малышев'])

    university.add_lesson('Математический анализ 2 и Дифференциальные уравнения', ['18ПМИ1'], 2*university.study_weeks, RoomType.PRACTICE, ['Гордеева'])
    university.add_lesson('Математический анализ 2 и Дифференциальные уравнения', ['18ПМИ1'], 1*university.study_weeks, RoomType.LECTURE, ['Гордеева'])
    university.add_lesson('Математический анализ 2 и Дифференциальные уравнения', ['18ПМИ1'], 2*university.study_weeks, RoomType.PRACTICE, ['Сафонов'])
    university.add_lesson('Теория вероятности', ['18ПМИ1'], 1*university.study_weeks, RoomType.LECTURE, ['Колданов'])
    university.add_lesson('Технологии программирования', ['18ПМИ1'], 1*university.study_weeks, RoomType.LECTURE, ['Штанюк'])
    university.add_lesson('Теория вероятности', ['18ПМИ1'], 1*university.study_weeks, RoomType.PRACTICE, ['Колданов'])
    university.add_lesson('Технологии программирования', ['18ПМИ1'], 2*university.study_weeks, RoomType.PRACTICE, ['Штанюк'])
    university.add_lesson('НИС', ['18ПМИ1'], 1*university.study_weeks, RoomType.PRACTICE, ['Сироткин'])
    university.add_lesson('Архитектура компьютера и операционные системы', ['18ПМИ1'], 1*university.study_weeks, RoomType.PRACTICE, ['Кащеев'])
    university.add_lesson('Архитектура компьютера и операционные системы', ['18ПМИ1'], 1*university.study_weeks, RoomType.LECTURE, ['Кащеев'])

    university.add_lesson('Математический анализ 2 и Дифференциальные уравнения', ['18ПМИ2'], 1*university.study_weeks, RoomType.LECTURE, ['Гордеева'])
    university.add_lesson('Математический анализ 2 и Дифференциальные уравнения', ['18ПМИ2'], 2*university.study_weeks, RoomType.PRACTICE, ['Гордеева'])
    university.add_lesson('Теория вероятности', ['18ПМИ2'], 1*university.study_weeks, RoomType.PRACTICE, ['Колданов'])
    university.add_lesson('Теория вероятности', ['18ПМИ2'], 1*university.study_weeks, RoomType.LECTURE, ['Колданов'])
    university.add_lesson('Технологии программирования', ['18ПМИ2'], 1*university.study_weeks, RoomType.LECTURE, ['Штанюк'])
    university.add_lesson('Технологии программирования', ['18ПМИ2'], 2*university.study_weeks, RoomType.PRACTICE, ['Штанюк'])
    university.add_lesson('Архитектура компьютера и операционные системы', ['18ПМИ2'], 1*university.study_weeks, RoomType.PRACTICE, ['Кащеев'])
    university.add_lesson('НИС', ['18ПМИ2'], 1*university.study_weeks, RoomType.PRACTICE, ['Сироткин'])
    university.add_lesson('Архитектура компьютера и операционные системы', ['18ПМИ2'], 1*university.study_weeks, RoomType.LECTURE, ['Кащеев'])

    university.add_lesson('Научный семинар', ['17ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Грибанов'])
    university.add_lesson('Исследование операций', ['17ПМИ'], 2*university.study_weeks, RoomType.PRACTICE, ['Бацына'])
    university.add_lesson('Стохастические модели принятия решений', ['17ПМИ'], 1*university.study_weeks, RoomType.LECTURE, ['Кочеганов'])
    university.add_lesson('Стохастические модели принятия решений', ['17ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Кочеганов'])
    university.add_lesson('Сетевые и веб технологии', ['17ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Ефименков'])

    university.add_lesson('Философия науки', ['16ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Абрашкин'])
    university.add_lesson('Случайные процессы', ['16ПМИ'], 2*university.study_weeks, RoomType.PRACTICE, ['Колданов'])
    university.add_lesson('Научный семинар', ['16ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Бабкина'])
    university.add_lesson('Академическое письмо', ['16ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Фролова'])
    university.add_lesson('Компьютерная лингвистика', ['16ПМИ'], 2*university.study_weeks, RoomType.PRACTICE, ['Слащинин'])
    university.add_lesson('Практический курсИнтернет вещей', ['16ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Зеленов'])
    university.add_lesson('Практический курс Интернет вещей', ['16ПМИ'], 1*university.study_weeks, RoomType.PRACTICE, ['Зеленов'])


    solver = Solver(university)
    res, output , by_teachers = solver.solve()
    assert res

    open_as_html(output, university, by_teachers)